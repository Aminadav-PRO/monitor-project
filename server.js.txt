// server.js

// 1. טעינת ספריות
const express = require('express');
const cors = require('cors');

// 2. יצירת שרת Express
const app = express();

// 3. קביעת הפורט
const port = 4000;

// 4. הפעלת CORS – חייב לבוא לפני המסלולים
app.use(cors());

// 5. הפעלת קריאת JSON – גם לפני המסלולים
app.use(express.json());

// 6. מסלול POST לקבלת נתונים
app.post('/data', (req, res) => {
  const { altitude, his, adi } = req.body;
  console.log('נתונים שהתקבלו מהמשתמש:');
  console.log('Altitude:', altitude);
  console.log('HIS:', his);
  console.log('ADI:', adi);

  // החזרת תשובה לדפדפן
  res.send('הנתונים התקבלו בהצלחה');
});

// 7. הרצת השרת והאזנה בפורט 4000
app.listen(port, () => {
  console.log(`The server is running on port ${port}`);
});
